<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://unpkg.com/wavesurfer.js"></script>
</head>
<body>
  <div style="padding: 2rem; font-family: sans-serif;">
    <h1>Audio Compressor</h1>
    <label for="audioFile">Upload audio file:</label>
    <input type="file" id="audioFile" accept="audio/*" style="display: block; margin-bottom: 1rem;">

    <div id="waveform" style="margin-bottom: 1rem;"></div>

    <button id="playPause" style="margin-bottom: 1rem;">Play/Pause</button>

    <label for="compressionSlider">Compression Level:</label>
    <input type="range" id="compressionSlider" min="0" max="1" step="0.01" value="0.5" style="display: block; width: 100%; max-width: 300px;">
  </div>

<script>
const audioFile = document.getElementById('audioFile');
const playPauseBtn = document.getElementById('playPause');
const compressionSlider = document.getElementById('compressionSlider');

const wavesurfer = WaveSurfer.create({
  container: '#waveform',
  waveColor: 'lightblue',
  progressColor: 'blue',
});

audioFile.addEventListener('change', (event) => {
  const selectedFile = event.target.files[0];
  if (selectedFile) {
    const objectUrl = URL.createObjectURL(selectedFile);
    wavesurfer.load(objectUrl);
  }
});

playPauseBtn.addEventListener('click', () => {
  wavesurfer.playPause();
});

compressionSlider.addEventListener('input', (event) => {
  const compressionRate = parseFloat(event.target.value);
  wavesurfer.setPlaybackRate(1 - compressionRate * 0.5);
  console.log(`Compression rate: ${compressionRate.toFixed(2)}, playback rate: ${(1 - compressionRate * 0.5).toFixed(2)}`);
});

wavesurfer.on('ready', () => {
  wavesurfer.setTime(0);
});
</script>
</body>
</html>
